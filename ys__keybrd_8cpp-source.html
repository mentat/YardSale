<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>YardSale: ys_keybrd.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.5 -->
<div class="qindex">  <form class="search" action="search.php" method="get">
<a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a>  | <span class="search"><u>S</u>earch&nbsp;for&nbsp;<input class="search" type="text" name="query" value="" size="20" accesskey="s"/></span></form></div>
<h1>ys_keybrd.cpp</h1><div class="fragment"><pre>00001 <span class="preprocessor">#include &lt;sstream&gt;</span>
00002 <span class="preprocessor">#include &lt;stack&gt;</span>
00003 <span class="preprocessor">#include &lt;iostream&gt;</span>
00004 
00005 <span class="preprocessor">#include "wx/app.h"</span>
00006 <span class="preprocessor">#include "wx/wx.h"</span>
00007 <span class="preprocessor">#include "yardsale.h"</span>
00008 <span class="preprocessor">#include "extra/xrc/xmlres.h"</span>
00009 <span class="preprocessor">#include "ys_keybrd.h"</span>
00010 
00011 <span class="keyword">using</span> <span class="keyword">namespace </span>std;
00012 
00013 <span class="comment">//when a button is pressed, it's ID matches up here with a function</span>
00014 BEGIN_EVENT_TABLE(YardKeybrd, wxPanel)
00015     EVT_BUTTON(XRCID(<span class="stringliteral">"ID_KBD_CLEAR"</span>), YardKeybrd::OnButtonClear)
00016     EVT_BUTTON(XRCID(<span class="stringliteral">"ID_KBD_SHIFT"</span>), YardKeybrd::OnButtonShift)
00017     EVT_BUTTON(XRCID(<span class="stringliteral">"ID_KBD_DELETE"</span>), YardKeybrd::OnButtonDelete)
00018     EVT_BUTTON(XRCID(<span class="stringliteral">"ID_KBD_SPACE"</span>), YardKeybrd::OnButtonSpace)
00019     EVT_BUTTON(XRCID(<span class="stringliteral">"ID_KBD_DONE"</span>), YardKeybrd::OnButtonDone)
00020     EVT_BUTTON(-1, YardKeybrd::OnButton)
00021     EVT_CHAR(YardKeybrd::OnChar)
00022 END_EVENT_TABLE()
00023 
00024 DECLARE_APP(<a class="code" href="class_yard_sale.html">YardSale</a>)
00025 
00026 YardKeybrd::YardKeybrd(wxWindow* parent, wxWindowID id, 
00027         <span class="keyword">const</span> wxPoint&amp; pos, <span class="keyword">const</span> wxSize&amp; size, 
00028         <span class="keywordtype">long</span> style, <span class="keyword">const</span> wxString&amp; name)
00029         :wxPanel(parent, id, pos, size, style, name)
00030 {
00031 
00032     wxXmlResource::Get()-&gt;Load(<span class="stringliteral">"res/keyboard.xrc"</span>);
00033     wxPanel * panel = wxXmlResource::Get()-&gt;LoadPanel(<span class="keyword">this</span>, <span class="stringliteral">"Keyboard"</span>);
00034     wxSizer * sizer = panel-&gt;GetSizer();
00035     
00036     sizer-&gt;SetSizeHints(<span class="keyword">this</span>);
00037     SetSize(sizer-&gt;GetMinSize());
00038     
00039     screencontents = wxString(<span class="stringliteral">""</span>);
00040     shift_down = FALSE;
00041     
00042     
00043     <span class="comment">//initialize a way to get to the screen</span>
00044     m_screen = (wxTextCtrl *)FindWindow(XRCID(<span class="stringliteral">"ID_KBD_SCREEN"</span>));
00045     
00046     <span class="comment">//make sure that the pointer is active</span>
00047     wxASSERT(m_screen);
00048    
00049 }
00050 
00051 YardKeybrd::~YardKeybrd(){
00052     
00053 }
00054 
00055 wxString YardKeybrd::GetKeyboardContents(){
00056     <span class="keywordflow">return</span> screencontents;
00057 }
00058 
00059 
00060 <span class="keywordtype">void</span> YardKeybrd::OnButtonDelete(wxCommandEvent &amp; event){
00061     DeleteChar();
00062     RefreshScreen();
00063 }
00064 
00065 <span class="keywordtype">void</span> YardKeybrd::OnButtonClear(wxCommandEvent &amp; event){
00066     screencontents = wxString(<span class="stringliteral">""</span>);
00067     RefreshScreen();
00068 }
00069 
00070 <span class="keywordtype">void</span> YardKeybrd::OnButtonShift(wxCommandEvent &amp; event){
00071     shift_down = TRUE;   
00072     RefreshScreen();
00073 }
00074 
00075 <span class="keywordtype">void</span> YardKeybrd::OnButtonSpace(wxCommandEvent &amp; event){
00076     screencontents.Append(<span class="stringliteral">" "</span>);
00077     RefreshScreen();
00078 }
00079 
00080 <span class="keywordtype">void</span> YardKeybrd::OnButtonDone(wxCommandEvent &amp; event){
00081    <span class="comment">/*Close the window and return screencontents*/</span>
00082 }
00083 
00084 <span class="keywordtype">void</span> YardKeybrd::OnChar(wxKeyEvent &amp; event){
00085   
00086         <span class="keywordflow">if</span> (event.GetKeyCode() == 8){
00087                DeleteChar();
00088         }<span class="keywordflow">else</span>{
00089             <span class="keywordflow">if</span> (!event.ShiftDown())
00090                 screencontents.Append(event.GetKeyCode());
00091             <span class="keywordflow">else</span>
00092                 screencontents.Append(event.GetKeyCode() + 32);
00093         }
00094        RefreshScreen();
00095 }
00096 
00097 <span class="keywordtype">void</span> YardKeybrd::AddString(wxString string){
00098     screencontents.Append(string);
00099     RefreshScreen();
00100 }
00101 
00102 <span class="keywordtype">void</span> YardKeybrd::DeleteChar(){
00103     <span class="keywordflow">if</span> (screencontents.Length() &gt; 1)
00104        screencontents = screencontents.Mid(0, screencontents.Length()-1);
00105     <span class="keywordflow">else</span>
00106         screencontents = wxString(<span class="stringliteral">""</span>);
00107     RefreshScreen();
00108 }
00109 
00110 <span class="keywordtype">void</span> YardKeybrd::OnButton(wxCommandEvent &amp; event)
00111 {   
00112     wxButton * temp = (wxButton *)FindWindow(event.GetId());
00113     <span class="keywordflow">if</span> (!shift_down)
00114         AddString(temp-&gt;GetLabel());
00115     <span class="keywordflow">else</span>
00116          AddString(temp-&gt;GetLabel().MakeUpper());   
00117     shift_down = FALSE;
00118 }
00119 
00120 <span class="keywordtype">void</span> YardKeybrd::ClearScreen(){
00121     m_screen-&gt;SetValue(<span class="stringliteral">""</span>);
00122 }
00123 
00127 <span class="keywordtype">void</span> YardKeybrd::RefreshScreen(){
00128     m_screen-&gt;SetValue(screencontents);
00129 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Sun May 9 23:07:59 2004 for YardSale by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.5 </small></address>
</body>
</html>
