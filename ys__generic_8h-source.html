<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>YardSale: ys_generic.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.5 -->
<div class="qindex">  <form class="search" action="search.php" method="get">
<a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a>  | <span class="search"><u>S</u>earch&nbsp;for&nbsp;<input class="search" type="text" name="query" value="" size="20" accesskey="s"/></span></form></div>
<h1>ys_generic.h</h1><div class="fragment"><pre>00001 <span class="preprocessor">#ifndef YS_GENERIC_EDIT_H</span>
00002 <span class="preprocessor"></span><span class="preprocessor">#define YS_GENERIC_EDIT_H</span>
00003 <span class="preprocessor"></span>
00004 <span class="preprocessor">#include &lt;vector&gt;</span>
00005 <span class="preprocessor">#include "wx/wx.h"</span>
00006 <span class="preprocessor">#include "wx/listbox.h"</span>
00007 <span class="preprocessor">#include "extra/xrc/xmlres.h"</span>
00008 
00009 <span class="keyword">using</span> <span class="keyword">namespace </span>std;
00010 
00011 <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
00012 <span class="keyword">class </span>YardGenericEdit: <span class="keyword">public</span> wxDialog
00013 {
00014  <span class="keyword">public</span>:
00016     YardGenericEdit(wxWindow* parent, wxWindowID id, <span class="keyword">const</span> wxString&amp; title,
00017                <span class="keyword">const</span> wxPoint&amp; pos = wxDefaultPosition, 
00018                <span class="keyword">const</span> wxSize&amp; size = wxDefaultSize,
00019                <span class="keywordtype">long</span> style = wxDEFAULT_FRAME_STYLE,
00020                <span class="keyword">const</span> wxString&amp; name = wxT(<span class="stringliteral">"YardGenericEdit"</span>))
00021         :wxDialog(parent, id, title, pos, size, style, name)
00022     {
00023         <span class="keywordflow">if</span> (!wxXmlResource::Get()-&gt;Load(<span class="stringliteral">"res/generic_wdr.xrc"</span>))
00024         {
00025             wxLogError(wxT(<span class="stringliteral">"Can't load resource"</span>));
00026             <span class="keywordflow">return</span>;
00027         }
00028         wxPanel * panel = wxXmlResource::Get()-&gt;LoadPanel(<span class="keyword">this</span>, <span class="stringliteral">"Generic"</span>);
00029         <span class="keywordflow">if</span> (!panel)
00030         {
00031             wxLogError(wxT(<span class="stringliteral">"Can't load resource"</span>));
00032             <span class="keywordflow">return</span>;
00033         } 
00034         m_list = static_cast&lt;wxListBox *&gt;(FindWindow(XRCID(<span class="stringliteral">"ID_GEN_LIST"</span>)));
00035         wxSizer * sizer = panel-&gt;GetSizer();
00036         sizer-&gt;SetSizeHints(<span class="keyword">this</span>);
00037         SetSize(sizer-&gt;GetMinSize());   
00038         Centre();
00039         wxLogDebug(wxT(<span class="stringliteral">"OnGeneric!"</span>));
00040    
00041     }
00042     
00044     
00045     <span class="keywordtype">void</span> OnAdd(wxCommandEvent&amp; event)
00046     {
00047         T temp();
00048        <span class="comment">// wxMessageBox</span>
00049         
00050         
00051     }  
00052     <span class="keywordtype">void</span> OnEnable(wxCommandEvent&amp; event){}
00053     <span class="keywordtype">void</span> OnDisable(wxCommandEvent&amp; event){}
00054     <span class="keywordtype">void</span> OnOK(wxCommandEvent&amp; event){ EndModal(0); }
00055     <span class="keywordtype">void</span> OnEdit(wxCommandEvent&amp; event){}        
00056   
00057     <span class="keywordtype">void</span> SetObjects(<span class="keyword">const</span> vector&lt;T&gt;&amp; objs)
00058     { 
00059         m_objects=objs;
00060         <span class="comment">// lets find out whats up biatch</span>
00061         
00062         m_list-&gt;Clear();
00063         wxString label;
00064         <span class="comment">// type discovery</span>
00065         
00066         
00067         
00068         <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; objs.size(); i++)
00069         {   <span class="comment">//fuck</span>
00070             string t = objs[i].child(T::GetUnique()).property(<span class="stringliteral">"type"</span>);
00071             m_list-&gt;Append(objs[i].child(T::GetUnique()).data().c_str());
00072                     
00073             wxLogDebug(wxT(<span class="stringliteral">"Type is %s"</span>), t.c_str());
00074             
00075             <span class="comment">//label.Printf(wxT("%s (%3f/%"), objs[i].child(T::Get</span>
00076         }
00077         <span class="comment">//m_list-&gt;InsertColumn(0, T::GetUnique());</span>
00078                 
00079     }
00080     
00081     vector&lt;T&gt;&amp; GetObjects() { <span class="keywordflow">return</span> m_objects; }       
00082     
00084     <span class="keyword">virtual</span> ~YardGenericEdit() {}
00085  <span class="keyword">private</span>:
00086      DECLARE_EVENT_TABLE()
00087      wxListBox * m_list;
00088      vector&lt;T&gt; m_objects;
00089 };
00090 
00091 <span class="preprocessor">#define BEGIN_EVENT_TABLE_T(theClass,theType, baseClass) \</span>
00092 <span class="preprocessor">    template &lt;typename theType&gt; \</span>
00093 <span class="preprocessor">    const wxEventTable *theClass&lt;theType&gt;::GetEventTable() const \</span>
00094 <span class="preprocessor">        { return &amp;theClass&lt;theType&gt;::sm_eventTable; } \</span>
00095 <span class="preprocessor">    template &lt;typename theType&gt; \</span>
00096 <span class="preprocessor">    const wxEventTable theClass&lt;theType&gt;::sm_eventTable = \</span>
00097 <span class="preprocessor">        { &amp;baseClass::sm_eventTable, &amp;theClass&lt;theType&gt;::sm_eventTableEntries[0] }; \</span>
00098 <span class="preprocessor">    template &lt;typename theType&gt; \</span>
00099 <span class="preprocessor">    const wxEventTableEntry theClass&lt;theType&gt;::sm_eventTableEntries[] = { \</span>
00100 <span class="preprocessor"></span>
00101 <span class="preprocessor"></span>BEGIN_EVENT_TABLE_T(YardGenericEdit, T, wxDialog)
00102     EVT_BUTTON(XRCID(<span class="stringliteral">"ID_GEN_ADD"</span>), YardGenericEdit::OnAdd)
00103     EVT_BUTTON(XRCID(<span class="stringliteral">"ID_GEN_EDIT"</span>), YardGenericEdit::OnEdit)
00104     EVT_BUTTON(XRCID(<span class="stringliteral">"ID_GEN_ENABLE"</span>), YardGenericEdit::OnEnable)
00105     EVT_BUTTON(XRCID(<span class="stringliteral">"ID_GEN_DISABLE"</span>), YardGenericEdit::OnDisable)
00106     EVT_BUTTON(XRCID(<span class="stringliteral">"ID_GEN_OK"</span>), YardGenericEdit::OnOK)
00107 END_EVENT_TABLE()
00108 
00109 #endif
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Sun May 9 23:07:59 2004 for YardSale by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.5 </small></address>
</body>
</html>
