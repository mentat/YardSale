<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>YardSale: ys_login.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.5 -->
<div class="qindex">  <form class="search" action="search.php" method="get">
<a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a>  | <span class="search"><u>S</u>earch&nbsp;for&nbsp;<input class="search" type="text" name="query" value="" size="20" accesskey="s"/></span></form></div>
<h1>ys_login.cpp</h1><div class="fragment"><pre>00001 <span class="preprocessor">#include "wx/panel.h"</span>
00002 <span class="preprocessor">#include "wx/textctrl.h"</span>
00003 <span class="preprocessor">#include "wx/log.h"</span>
00004 <span class="preprocessor">#include "wx/sizer.h"</span>
00005 <span class="preprocessor">#include "wx/dcmemory.h"</span>
00006 <span class="preprocessor">#include "wx/statbmp.h"</span>
00007 <span class="preprocessor">#include "wx/bitmap.h"</span>
00008 <span class="preprocessor">#include "extra/xrc/xmlres.h"</span>
00009 
00010 <span class="preprocessor">#include "yardsale.h"</span>
00011 <span class="preprocessor">#include "ys_build.h"</span>
00012 <span class="preprocessor">#include "ys_login.h"</span>
00013 <span class="preprocessor">#include "ys_config.h"</span>
00014 <span class="preprocessor">#include "ys_about_gl.h"</span>
00015 
00016 <span class="preprocessor">#define LOGO_OFFSET_FROM_BOTTOM 30</span>
00017 <span class="preprocessor"></span><span class="preprocessor">#define LOGO_OFFSET_FROM_LEFT 10</span>
00018 <span class="preprocessor"></span>
00019 BEGIN_EVENT_TABLE(<a class="code" href="class_yard_login.html">YardLogin</a>, wxDialog)
00020     EVT_BUTTON(XRCID(<span class="stringliteral">"ID_LOGIN_LOGIN"</span>), YardLogin::OnLogin)
00021     EVT_BUTTON(XRCID(<span class="stringliteral">"ID_LOGIN_EXIT"</span>), YardLogin::OnExitButton)
00022     EVT_BUTTON(XRCID(<span class="stringliteral">"ID_LOGIN_CONFIG"</span>), YardLogin::OnConfig)
00023 END_EVENT_TABLE()
00024 
00025 <a class="code" href="class_yard_login.html#a0">YardLogin::YardLogin</a>(wxWindow* parent, wxWindowID id, <span class="keyword">const</span> wxString&amp; title,
00026                    <span class="keyword">const</span> wxPoint&amp; pos, <span class="keyword">const</span> wxSize&amp; size, <span class="keywordtype">long</span> style)
00027 :wxDialog(parent, id, title, pos, size, style) {
00028     
00029     wxXmlResource::Get()-&gt;Load(<span class="stringliteral">"res/login.xrc"</span>);
00030     wxPanel * panel = wxXmlResource::Get()-&gt;LoadPanel(<span class="keyword">this</span>, <span class="stringliteral">"Login"</span>);
00031     wxSizer * sizer = panel-&gt;GetSizer();
00032 
00033     
00034     {
00035         wxStaticBitmap* bitmap = static_cast&lt;wxStaticBitmap*&gt;(FindWindow(XRCID(<span class="stringliteral">"ID_LOGIN_LOGO"</span>)));
00036         wxBitmap logo = bitmap-&gt;GetBitmap();
00037         wxMemoryDC fun;
00038         wxString txt;
00039         fun.SelectObject(logo);
00040         fun.SetTextForeground(*wxWHITE);
00041         txt.Printf(wxT(<span class="stringliteral">"YardSale: %.3f \"%s\" (%s, %s)"</span>), 
00042             GetVersion(), YS_CODENAME, YS_OS, YS_BUILD_MODE);
00043         fun.DrawText(txt, LOGO_OFFSET_FROM_LEFT,logo.GetHeight() - LOGO_OFFSET_FROM_BOTTOM);
00044     }
00045     
00046     sizer-&gt;SetSizeHints(<span class="keyword">this</span>);
00047     SetSize(sizer-&gt;GetMinSize());
00048     
00049    <span class="comment">// YardAboutGL * about = new YardAboutGL(this, -1, wxT("About YardSale"));</span>
00050     <span class="comment">//about-&gt;ShowModal();</span>
00051    <span class="comment">// about-&gt;Destroy();</span>
00052    
00053     Centre();
00054 }
00055 
<a name="l00056"></a><a class="code" href="class_yard_login.html#a1">00056</a> <a class="code" href="class_yard_login.html#a1">YardLogin::~YardLogin</a>()
00057 {
00058     
00059 }
00060 
<a name="l00061"></a><a class="code" href="class_yard_login.html#a2">00061</a> <span class="keywordtype">void</span> <a class="code" href="class_yard_login.html#a2">YardLogin::OnExitButton</a>(wxCommandEvent &amp; event)
00062 {
00063     wxLogDebug(wxT(<span class="stringliteral">"OnExitButton"</span>));
00064     EndModal(1);
00065     
00066 }
00067 
<a name="l00068"></a><a class="code" href="class_yard_login.html#a4">00068</a> <span class="keywordtype">void</span> <a class="code" href="class_yard_login.html#a4">YardLogin::OnConfig</a>(wxCommandEvent &amp; event)
00069 {
00070     wxLogDebug(wxT(<span class="stringliteral">"OnConfig"</span>));
00071     <a class="code" href="class_yard_config.html">YardConfig</a> * conf = <span class="keyword">new</span> <a class="code" href="class_yard_config.html">YardConfig</a>(<span class="keyword">this</span>, -1, wxT(<span class="stringliteral">"YardSale Configuration"</span>));
00072     conf-&gt;ShowModal();
00073     conf-&gt;Destroy();
00074     
00075 }
00076 
<a name="l00077"></a><a class="code" href="class_yard_login.html#a3">00077</a> <span class="keywordtype">void</span> <a class="code" href="class_yard_login.html#a3">YardLogin::OnLogin</a>(wxCommandEvent &amp; event)
00078 {
00079     wxLogDebug(wxT(<span class="stringliteral">"OnLogin"</span>));
00080     
00082     m_user = static_cast&lt;wxTextCtrl*&gt;(FindWindow(XRCID(<span class="stringliteral">"ID_LOGIN_USER"</span>)))-&gt;GetValue();
00083     m_pass = static_cast&lt;wxTextCtrl*&gt;(FindWindow(XRCID(<span class="stringliteral">"ID_LOGIN_PASSWORD"</span>)))-&gt;GetValue();
00084 
00085     <span class="keywordflow">if</span> (m_user.length() == 0)
00086     {
00087         wxLogDebug(wxT(<span class="stringliteral">"Empty username"</span>));
00088         <span class="comment">// show message box saying cant have empty username/pass</span>
00089         <span class="comment">//wxMessageBox(</span>
00090         <span class="keywordflow">return</span>;
00091     }
00092     <span class="keywordflow">if</span> (m_pass.length() == 0)
00093     {
00094         wxLogDebug(wxT(<span class="stringliteral">"Empty password"</span>));
00095         <span class="keywordflow">return</span>;
00096     }
00097     
00098     EndModal(0);
00099     
00100 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Sun May 9 23:07:59 2004 for YardSale by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.5 </small></address>
</body>
</html>
