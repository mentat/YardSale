<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>YardSale: ys_bitmaps.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.5 -->
<div class="qindex">  <form class="search" action="search.php" method="get">
<a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a>  | <span class="search"><u>S</u>earch&nbsp;for&nbsp;<input class="search" type="text" name="query" value="" size="20" accesskey="s"/></span></form></div>
<h1>ys_bitmaps.cpp</h1><div class="fragment"><pre>00001 <span class="preprocessor">#include "ys_bitmaps.h"</span>
00002 <span class="preprocessor">#include "ys_exception.h"</span>
00003 
00004 <span class="preprocessor">#include "wx/bitmap.h"</span>
00005 <span class="preprocessor">#include "wx/string.h"</span>
00006 <span class="preprocessor">#include &lt;iostream&gt;</span>
00007 
00008 <span class="keyword">using</span> <span class="keyword">namespace </span>std;
00009 <span class="preprocessor">#define TEXT_FIELD_WIDTH 40</span>
00010 <span class="preprocessor"></span>
00011 wxChar filenames [][TEXT_FIELD_WIDTH] = { 
00012     <span class="stringliteral">"images/ys_employee_128x128.png"</span>,
00013     <span class="stringliteral">"images/ys_320x93.png"</span>,
00014     <span class="stringliteral">"images/back_64x64.png"</span>,
00015     <span class="stringliteral">"images/equals_64x64.png"</span>,
00016     <span class="stringliteral">"images/exec_64x64.png"</span>,
00017     <span class="stringliteral">"images/fileclose_64x64.png"</span>,
00018     <span class="stringliteral">"images/pinguim-root3.png"</span>,
00019     <span class="stringliteral">"images/pinguim-user.png"</span>,
00020     <span class="stringliteral">"images/pinguim-user2.png"</span>,
00021     <span class="stringliteral">"images/tux.png"</span>,
00022     <span class="stringliteral">"images/ys_customer_128x128.png"</span>,
00023     <span class="stringliteral">"images/ys_enlarge_64x64.png"</span>,
00024     <span class="stringliteral">"images/ys_inventory_128x128.png"</span>,
00025     <span class="stringliteral">"images/ys_logout_128x128.png"</span>,
00026     <span class="stringliteral">"images/ys_reports_128x128.png"</span>,
00027     <span class="stringliteral">"images/ys_sale_128x128.png"</span>,
00028     <span class="stringliteral">"images/ys_shrink_64x64.png"</span>,
00029     <span class="stringliteral">"images/calc_80x80.png"</span>,
00030     <span class="stringliteral">"images/keyboard_80x80.png"</span>,
00031     <span class="stringliteral">"images/undo_80x80.png"</span>,
00032     <span class="stringliteral">"images/trashcan_90x90.png"</span>
00033 };
00034 
00035 YardBitmaps::YardBitmaps() {
00036     
00037     m_index = 0;
00038     m_length = <span class="keyword">sizeof</span>(filenames)/TEXT_FIELD_WIDTH;
00039     m_bitmaps = <span class="keyword">new</span> wxBitmap * [m_length];
00040     
00041     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> i = 0; i &lt; m_length; i++)
00042         m_bitmaps[i] = 0;
00043     
00044 }
00045 
00046 YardBitmaps::~YardBitmaps() {
00047     
00048     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> i = 0; i &lt; m_length; i++)
00049         <span class="keyword">delete</span> m_bitmaps[i];
00050     
00051     <span class="keyword">delete</span> [] m_bitmaps;
00052     
00053 }
00054 
00055 <span class="keywordtype">int</span> YardBitmaps::LoadBitmaps() {
00056     
00057     m_bitmaps[m_index] = <span class="keyword">new</span> wxBitmap(filenames[m_index], wxBITMAP_TYPE_PNG);
00058     
00059     <span class="keywordflow">if</span> (!m_bitmaps[m_index])
00060         <span class="keywordflow">throw</span> <a class="code" href="class_yard_exception.html">YardException</a>(<span class="stringliteral">"Bitmap not allocated"</span>);
00061     <span class="keywordflow">if</span> (!m_bitmaps[m_index]-&gt;Ok())
00062         <span class="keywordflow">throw</span> <a class="code" href="class_yard_exception.html">YardException</a>(<span class="stringliteral">"Bitmap data not present."</span>);
00063     
00064     <span class="keywordflow">return</span> (m_length - (++m_index));
00065       
00066 }
00067     
00068 wxBitmap&amp; YardBitmaps::GetBitmap(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> id) {
00069 
00070     <span class="keywordflow">if</span> (id &gt;= m_index)
00071         <span class="keywordflow">throw</span> <a class="code" href="class_yard_exception.html">YardException</a>(<span class="stringliteral">"Invalid bitmap!"</span>);
00072     
00073     <span class="keywordflow">return</span> *m_bitmaps[id];
00074     
00075 
00076 }
00077 
00078 <span class="preprocessor">#if (defined(YS_TEST_MAIN) || defined(YS_TEST_BITMAPS))</span>
00079 <span class="preprocessor"></span><span class="preprocessor">#include &lt;iostream&gt;</span>
00080 <span class="preprocessor">#include &lt;vector&gt;</span>
00081 <span class="preprocessor">#include "ys_test.h"</span>
00082 
00083 <span class="keyword">using</span> <span class="keyword">namespace </span>std;
00084 
00085 <span class="keywordtype">int</span> main()
00086 {
00087     failure = 0;
00088     YardBitmaps test;
00089     
00090     <span class="keywordflow">try</span> {
00091         <span class="keywordflow">while</span>(test.LoadBitmaps() != 0){}
00092     } <span class="keywordflow">catch</span> (<a class="code" href="class_yard_exception.html">YardException</a> &amp;e){
00093         VERIFY(0,1);
00094         cout &lt;&lt; <span class="stringliteral">"YardException: "</span> &lt;&lt; e.what() &lt;&lt; endl;
00095         <span class="keywordflow">return</span> failure;
00096     }
00097     <span class="keywordflow">catch</span> (exception &amp;e) {
00098         VERIFY(0,1);
00099         cout &lt;&lt; <span class="stringliteral">"std::exception: "</span> &lt;&lt; e.what() &lt;&lt; endl;
00100         <span class="keywordflow">return</span> failure;
00101     }
00102     <span class="keywordflow">catch</span>(...) {
00103         VERIFY(0,1); 
00104         cout &lt;&lt; <span class="stringliteral">"Unknown exception"</span> &lt;&lt; endl;
00105         <span class="keywordflow">return</span> failure;
00106     }
00107     <span class="keywordflow">return</span> failure;
00108 
00109 }
00110 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Sun May 9 23:07:58 2004 for YardSale by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.5 </small></address>
</body>
</html>
