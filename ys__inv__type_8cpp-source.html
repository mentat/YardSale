<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>YardSale: ys_inv_type.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.5 -->
<div class="qindex">  <form class="search" action="search.php" method="get">
<a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a>  | <span class="search"><u>S</u>earch&nbsp;for&nbsp;<input class="search" type="text" name="query" value="" size="20" accesskey="s"/></span></form></div>
<h1>ys_inv_type.cpp</h1><div class="fragment"><pre>00001 <span class="preprocessor">#include &lt;sstream&gt;</span>
00002 
00003 <span class="preprocessor">#include "ys_inv_type.h"</span>
00004 <span class="preprocessor">#include "wx/log.h"</span>
00005 
00006 <span class="keyword">using</span> <span class="keyword">namespace </span>std;
00007 
00008 <span class="preprocessor">#if 0</span>
00009 <span class="preprocessor"></span><span class="keywordtype">void</span> YardInvType::SetKey(<span class="keywordtype">int</span> key) {
00010     
00011     <span class="keywordflow">if</span> (m_key == -1)
00012         m_key = key;
00013     <span class="keywordflow">else</span>
00014         <span class="keywordflow">throw</span> YardDBIntegrityException(<span class="stringliteral">"YardInvType::SetKey: You may not"</span>
00015             <span class="stringliteral">" overwrite this value or DB integrity will be violated."</span>);
00016 }
00017 <span class="preprocessor">#endif</span>
00018 <span class="preprocessor"></span>
<a name="l00019"></a><a class="code" href="class_yard_inv_type.html#a60">00019</a> string <a class="code" href="class_yard_inv_type.html#a60">YardInvType::ToString</a>(<span class="keyword">const</span> string&amp; delim, <span class="keywordtype">bool</span> quotes)<span class="keyword"> const </span>{
00020     
00021     <span class="keywordtype">char</span> q = <span class="charliteral">'\''</span>;
00022     stringstream output;
00023     output &lt;&lt; GetKey() &lt;&lt; delim 
00024         &lt;&lt; q &lt;&lt; GetName() &lt;&lt; q &lt;&lt; delim
00025         &lt;&lt; q &lt;&lt; <a class="code" href="class_yard_inv_type.html#a4">GetSKU</a>() &lt;&lt; q &lt;&lt; delim 
00026         &lt;&lt; q &lt;&lt; <a class="code" href="class_yard_inv_type.html#a6">GetBarCode</a>() &lt;&lt; q &lt;&lt; delim 
00027         &lt;&lt; q &lt;&lt; <a class="code" href="class_yard_inv_type.html#a7">GetDescription</a>() &lt;&lt; q &lt;&lt; delim 
00028         &lt;&lt; q &lt;&lt; <a class="code" href="class_yard_inv_type.html#a8">GetDepartment</a>() &lt;&lt; q &lt;&lt; delim 
00029         &lt;&lt; <a class="code" href="class_yard_inv_type.html#a9">GetQuantOnHandS</a>() &lt;&lt; delim 
00030         &lt;&lt; <a class="code" href="class_yard_inv_type.html#a11">GetQuantOnOrderS</a>() &lt;&lt; delim 
00031         &lt;&lt; <a class="code" href="class_yard_inv_type.html#a13">GetReorderLevelS</a>() &lt;&lt; delim 
00032         &lt;&lt; GetReorderQuantityS() &lt;&lt; delim 
00033         &lt;&lt; q &lt;&lt; <a class="code" href="class_yard_inv_type.html#a17">GetType</a>() &lt;&lt; q &lt;&lt; delim 
00034         &lt;&lt; <a class="code" href="class_yard_inv_type.html#a32">GetGroupIdS</a>() &lt;&lt; delim
00035         &lt;&lt; <a class="code" href="class_yard_inv_type.html#a20">GetTaxTypeS</a>() &lt;&lt; delim
00036         &lt;&lt; <a class="code" href="class_yard_inv_type.html#a22">GetVendorIdS</a>() &lt;&lt; delim
00037         &lt;&lt; <a class="code" href="class_yard_inv_type.html#a24">GetRetailPriceS</a>() &lt;&lt; delim
00038         &lt;&lt; <a class="code" href="class_yard_inv_type.html#a26">GetWholesalePriceS</a>() &lt;&lt; delim
00039         &lt;&lt; q &lt;&lt; <a class="code" href="class_yard_inv_type.html#a34">GetBulkPricing</a>() &lt;&lt; q &lt;&lt; delim;    
00040     <span class="keywordflow">if</span> (GetDateLastReceived().GetYear() == 0)
00041         output &lt;&lt; <span class="stringliteral">"now()"</span> &lt;&lt; delim;
00042     <span class="keywordflow">else</span>
00043         output &lt;&lt; q &lt;&lt; GetDateLastReceived().ToString() &lt;&lt; q &lt;&lt; delim;
00044     output &lt;&lt; <a class="code" href="class_yard_inv_type.html#a18">GetWeightLbsS</a>() &lt;&lt; delim
00045         &lt;&lt; q &lt;&lt; <a class="code" href="class_yard_inv_type.html#a28">IsOverSizedS</a>() &lt;&lt; q &lt;&lt; delim
00046         &lt;&lt; q &lt;&lt; <a class="code" href="class_yard_inv_type.html#a30">MustShipFreightS</a>() &lt;&lt; q &lt;&lt; delim
00047         &lt;&lt; q &lt;&lt; GetComment() &lt;&lt; q;
00048   
00049     wxLogDebug(output.str().c_str());
00050      
00051     <span class="keywordflow">return</span> output.str();
00052         
00053 }
00054 
00055 <span class="preprocessor">#if (defined(YS_TEST_MAIN) || defined(YS_TEST_INV_TYPE))</span>
00056 <span class="preprocessor"></span><span class="preprocessor">#include &lt;iostream&gt;</span>
00057 <span class="preprocessor">#include &lt;vector&gt;</span>
00058 <span class="preprocessor">#include "ys_test.h"</span>
00059 
00060 <span class="keyword">using</span> <span class="keyword">namespace </span>std;
00061 
00062 <span class="keywordtype">int</span> main()
00063 {
00064     <a class="code" href="class_yard_inv_type.html">YardInvType</a> test1;
00065     
00066     test1.<a class="code" href="class_yard_inv_type.html#a40">SetBarCode</a>(<span class="stringliteral">"QWERTY"</span>);
00067     VERIFY(test1.<a class="code" href="class_yard_inv_type.html#a6">GetBarCode</a>(), string(<span class="stringliteral">"QWERTY"</span>));
00068     
00069     test1.<a class="code" href="class_yard_inv_type.html#a41">SetDescription</a>(<span class="stringliteral">"A very nice object"</span>);
00070     VERIFY(test1.<a class="code" href="class_yard_inv_type.html#a7">GetDescription</a>(), string(<span class="stringliteral">"A very nice object"</span>));
00071     
00072     test1.<a class="code" href="class_yard_inv_type.html#a42">SetDepartment</a>(<span class="stringliteral">"Sales"</span>);
00073     VERIFY(test1.<a class="code" href="class_yard_inv_type.html#a8">GetDepartment</a>(), string(<span class="stringliteral">"Sales"</span>))
00074     
00075     test1.<a class="code" href="class_yard_inv_type.html#a43">SetQuantOnHand</a>(69);
00076     VERIFY(test1.<a class="code" href="class_yard_inv_type.html#a10">GetQuantOnHand</a>(), 69);
00077     
00078     test1.<a class="code" href="class_yard_inv_type.html#a44">SetQuantOnOrder</a>(96);
00079     VERIFY(test1.<a class="code" href="class_yard_inv_type.html#a12">GetQuantOnOrder</a>(), 96);
00080     
00081     test1.<a class="code" href="class_yard_inv_type.html#a45">SetReorderLevel</a>(30);
00082     VERIFY(test1.<a class="code" href="class_yard_inv_type.html#a14">GetReorderLevel</a>(), 30);
00083    
00084     test1.<a class="code" href="class_yard_inv_type.html#a48">SetType</a>(<span class="stringliteral">"Widget"</span>);
00085     VERIFY(test1.<a class="code" href="class_yard_inv_type.html#a17">GetType</a>(), string(<span class="stringliteral">"Widget"</span>));
00086     
00087     test1.<a class="code" href="class_yard_inv_type.html#a49">SetWeightLbs</a>(1000.45);
00088     VERIFY_FLOAT(test1.<a class="code" href="class_yard_inv_type.html#a19">GetWeightLbs</a>(), 1000.45);
00089     
00090     test1.<a class="code" href="class_yard_inv_type.html#a50">SetTaxType</a>(0);
00091     VERIFY(test1.<a class="code" href="class_yard_inv_type.html#a21">GetTaxType</a>(), 0);
00092     
00093     test1.<a class="code" href="class_yard_inv_type.html#a52">SetRetailPrice</a>(34.23);
00094     VERIFY_FLOAT(test1.<a class="code" href="class_yard_inv_type.html#a25">GetRetailPrice</a>(), 34.23);
00095     
00096     test1.<a class="code" href="class_yard_inv_type.html#a53">SetWholesalePrice</a>(1000.12);
00097     VERIFY_FLOAT(test1.<a class="code" href="class_yard_inv_type.html#a27">GetWholesalePrice</a>(), 1000.12);
00098    
00099     test1.<a class="code" href="class_yard_inv_type.html#a54">AddBulkPrice</a>(100, 0.12);
00100     VERIFY_FLOAT(test1.<a class="code" href="class_yard_inv_type.html#a35">GetBulkPrice</a>(100), 0.12);
00101     <span class="comment">//cout &lt;&lt; test1.child("INV_Bulk_Price").child("100").data() &lt;&lt; endl;</span>
00102     <span class="comment">//cout &lt;&lt; test1.GetBulkPrice(100) &lt;&lt; endl;</span>
00103     
00104     test1.<a class="code" href="class_yard_inv_type.html#a54">AddBulkPrice</a>(200, 0.23);
00105     VERIFY_FLOAT(test1.<a class="code" href="class_yard_inv_type.html#a35">GetBulkPrice</a>(200), 0.23);
00106     <span class="comment">// should overwrite</span>
00107     test1.<a class="code" href="class_yard_inv_type.html#a54">AddBulkPrice</a>(100, 0.50);
00108     VERIFY_FLOAT(test1.<a class="code" href="class_yard_inv_type.html#a35">GetBulkPrice</a>(100), 0.50);
00109     
00110     test1.<a class="code" href="class_yard_inv_type.html#a55">RemoveBulkPrice</a>(100);
00111     VERIFY_FLOAT(test1.<a class="code" href="class_yard_inv_type.html#a35">GetBulkPrice</a>(100), 0.0);
00112    
00113     test1.<a class="code" href="class_yard_inv_type.html#a56">SetOverSized</a>(<span class="keyword">true</span>);
00114     VERIFY(test1.<a class="code" href="class_yard_inv_type.html#a29">IsOverSized</a>(), <span class="keyword">true</span>);
00115     
00116     test1.<a class="code" href="class_yard_inv_type.html#a57">SetShipFreight</a>(<span class="keyword">false</span>);
00117     VERIFY(test1.<a class="code" href="class_yard_inv_type.html#a31">MustShipFreight</a>(), <span class="keyword">false</span>);
00118  
00119 <span class="preprocessor">#if 0 </span>
00120 <span class="preprocessor"></span>    vector&lt;XMLNode&gt; v = test1.<a class="code" href="class_x_m_l_node.html#a14">children</a>();
00121    
00122     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; v.size(); i++)
00123     {
00124         cout &lt;&lt; v[i].name() &lt;&lt; endl;
00125     }
00126     
00127     cout &lt;&lt; string(test1) &lt;&lt; endl;
00128 <span class="preprocessor">#endif</span>
00129 <span class="preprocessor"></span>    <a class="code" href="class_yard_inv_type.html">YardInvType</a> test2(test1);
00130     
00131     VERIFY(test2.<a class="code" href="class_yard_inv_type.html#a6">GetBarCode</a>(), test1.<a class="code" href="class_yard_inv_type.html#a6">GetBarCode</a>());
00132     
00133     <a class="code" href="class_yard_inv_type.html">YardInvType</a> test3;
00134     
00135     test3 = test2;
00136     
00137     VERIFY(test3.<a class="code" href="class_yard_inv_type.html#a8">GetDepartment</a>(), test2.GetDepartment());
00138     VERIFY(test3.<a class="code" href="class_yard_inv_type.html#a29">IsOverSized</a>(), test2.IsOverSized());
00139 
00140 
00141     vector&lt;YardInvType&gt; anArray;
00142     
00143     anArray.push_back(test1);
00144     anArray.push_back(test2);
00145     anArray.push_back(test3);
00146     
00147     VERIFY(anArray[1].GetDepartment(), anArray[2].GetDepartment());
00148     
00149     vector&lt;YardInvType&gt; copyArray;
00150     copyArray = anArray;
00151     
00152     VERIFY(anArray[0].GetBarCode(), copyArray[0].GetBarCode());
00153       
00154     <span class="keywordflow">return</span> failure;
00155 }
00156 
00157 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Sun May 9 23:07:59 2004 for YardSale by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.5 </small></address>
</body>
</html>
