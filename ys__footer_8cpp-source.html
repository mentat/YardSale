<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>YardSale: ys_footer.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.5 -->
<div class="qindex">  <form class="search" action="search.php" method="get">
<a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a>  | <span class="search"><u>S</u>earch&nbsp;for&nbsp;<input class="search" type="text" name="query" value="" size="20" accesskey="s"/></span></form></div>
<h1>ys_footer.cpp</h1><div class="fragment"><pre>00001 <span class="preprocessor">#include "extra/xrc/xmlres.h"</span>
00002 <span class="preprocessor">#include "wx/log.h"</span>
00003 <span class="preprocessor">#include "wx/panel.h"</span>
00004 <span class="preprocessor">#include "wx/bmpbuttn.h"</span>
00005 <span class="preprocessor">#include "wx/datetime.h"</span>
00006 <span class="preprocessor">#include "wx/timer.h"</span>
00007 <span class="preprocessor">#include "wx/stattext.h"</span>
00008 
00009 <span class="preprocessor">#include "ys_footer.h"</span>
00010 <span class="preprocessor">#include "ys_calc_dlg.h"</span>
00011 <span class="preprocessor">#include "ys_keybrd_dlg.h"</span>
00012 
00013 <span class="keyword">enum</span> { FOOTER_TIMER_ID = 9999 };
00014 
00015 BEGIN_EVENT_TABLE(<a class="code" href="class_yard_footer.html">YardFooter</a>, wxPanel)
00016     EVT_TIMER(FOOTER_TIMER_ID, YardFooter::OnTimer)
00017     EVT_BUTTON(XRCID(<span class="stringliteral">"ID_FOOTER_BACK"</span>), YardFooter::OnBack)
00018     EVT_BUTTON(XRCID(<span class="stringliteral">"ID_FOOTER_CALC"</span>), YardFooter::OnCalc)
00019     EVT_BUTTON(XRCID(<span class="stringliteral">"ID_FOOTER_KEY"</span>), YardFooter::OnKeyboard)
00020     EVT_BUTTON(XRCID(<span class="stringliteral">"ID_FOOTER_UNDO"</span>), YardFooter::OnUndo)
00021 END_EVENT_TABLE()
00022 
00023 IMPLEMENT_DYNAMIC_CLASS(<a class="code" href="class_yard_footer.html">YardFooter</a>, wxPanel)
00024 
00025 YardFooter::YardFooter():wxPanel(),m_timer(0)
00026 {
00027 }
00028 
00029 <span class="keywordtype">bool</span> YardFooter::Create(wxWindow* parent, wxWindowID id, 
00030      <span class="keyword">const</span> wxPoint&amp; pos, <span class="keyword">const</span> wxSize&amp; size, <span class="keywordtype">long</span> style, <span class="keyword">const</span> wxString&amp; name)
00031 {
00032     <span class="keywordflow">if</span> ( !wxPanel::Create(parent, id, pos, size, style, name) )
00033         <span class="keywordflow">return</span> <span class="keyword">false</span>;
00034     
00035     wxLogDebug(wxT(<span class="stringliteral">"YardFooter::Create"</span>));
00036     wxXmlResource::Get()-&gt;Load(<span class="stringliteral">"res/info-footer.xrc"</span>);
00037     wxPanel * panel = wxXmlResource::Get()-&gt;LoadPanel(<span class="keyword">this</span>, <span class="stringliteral">"Footer"</span>);
00038 
00039     <span class="comment">// see if parent is main frame if so, hide back button</span>
00040 
00041     wxWindow * parentWin = GetParent()-&gt;GetParent();
00042     
00043     wxASSERT(parentWin);
00044     <span class="keywordflow">if</span> (parentWin-&gt;GetName() == wxT(<span class="stringliteral">"YardMain"</span>))
00045     {
00046         wxLogDebug(wxT(<span class="stringliteral">"Name checks"</span>));
00047         wxButton * back = static_cast&lt;wxButton *&gt;(FindWindow(XRCID(<span class="stringliteral">"ID_FOOTER_BACK"</span>)));
00048         wxASSERT(back);
00049         back-&gt;Show(<span class="keyword">false</span>);
00050     }
00051     
00052     m_timer = <span class="keyword">new</span> wxTimer(<span class="keyword">this</span>, FOOTER_TIMER_ID);
00053     m_timeTxt = (wxStaticText *)FindWindow(XRCID(<span class="stringliteral">"ID_FOOTER_TIME"</span>));
00054     
00055     wxDateTime now = wxDateTime::Now();
00056     
00057     m_timeTxt-&gt;SetLabel(now.FormatISOTime());  
00058     <span class="keywordflow">return</span> <span class="keyword">true</span>;
00059 }
00060 
00061 YardFooter::YardFooter(wxWindow* parent, wxWindowID id, 
00062      <span class="keyword">const</span> wxPoint&amp; pos, 
00063      <span class="keyword">const</span> wxSize&amp; size, 
00064      <span class="keywordtype">long</span> style, 
00065      <span class="keyword">const</span> wxString&amp; name)
00066 {
00067     Create(parent, id, pos, size, style, name);
00068 }
00069 
00070 YardFooter::~YardFooter()
00071 {
00072     <span class="keywordflow">if</span> (m_timer)
00073         m_timer-&gt;Stop();
00074     <span class="keyword">delete</span> m_timer;
00075 }
00076  
00077 <span class="keywordtype">void</span> YardFooter::OnTimer(wxTimerEvent&amp; event)
00078 {
00079     <span class="comment">//wxDateTime now = wxDateTime::Now();</span>
00080     
00081     <span class="comment">//m_timeTxt-&gt;SetLabel(now.FormatISOTime());</span>
00082     
00083 }
00084 
00085 <span class="keywordtype">void</span> YardFooter::OnBack(wxCommandEvent&amp; event)
00086 {
00087     
00088     wxLogDebug(wxT(<span class="stringliteral">"OnBack"</span>));
00089     
00090     <span class="comment">// get the parent of the parent</span>
00091     wxWindow * parentWin = GetParent()-&gt;GetParent();
00092     
00093     wxASSERT(parentWin);
00094     
00095     <span class="comment">// close it</span>
00096     parentWin-&gt;Close();
00097 }
00098 
00099 
00100 <span class="keywordtype">void</span> YardFooter::OnCalc(wxCommandEvent&amp; event)
00101 {
00102     
00103     wxLogDebug(wxT(<span class="stringliteral">"OnCalc"</span>));
00104     
00105     <a class="code" href="class_yard_calc_dlg.html">YardCalcDlg</a> * dlg = <span class="keyword">new</span> <a class="code" href="class_yard_calc_dlg.html">YardCalcDlg</a>(<span class="keyword">this</span>, -1, wxT(<span class="stringliteral">"Calculator"</span>));
00106     dlg-&gt;ShowModal();
00107     dlg-&gt;Destroy();
00108     
00109 }
00110 
00111 <span class="keywordtype">void</span> YardFooter::OnKeyboard(wxCommandEvent &amp; event)
00112 {
00113     wxLogDebug(wxT(<span class="stringliteral">"OnKeyboard"</span>));
00114     <a class="code" href="class_yard_keybrd_dlg.html">YardKeybrdDlg</a> * dlg = <span class="keyword">new</span> <a class="code" href="class_yard_keybrd_dlg.html">YardKeybrdDlg</a>(<span class="keyword">this</span>, -1, wxT(<span class="stringliteral">"Keyboard"</span>));
00115     dlg-&gt;ShowModal();
00116     dlg-&gt;Destroy();
00117     
00118 }
00119 
00120 <span class="keywordtype">void</span> YardFooter::OnUndo(wxCommandEvent &amp; event)
00121 {
00122     wxLogDebug(wxT(<span class="stringliteral">"OnUndo"</span>));
00123     
00124 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Sun May 9 23:07:59 2004 for YardSale by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.5 </small></address>
</body>
</html>
