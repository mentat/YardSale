<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>YardSale: ys_log.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.5 -->
<div class="qindex">  <form class="search" action="search.php" method="get">
<a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a>  | <span class="search"><u>S</u>earch&nbsp;for&nbsp;<input class="search" type="text" name="query" value="" size="20" accesskey="s"/></span></form></div>
<h1>ys_log.cpp</h1><div class="fragment"><pre>00001 <span class="preprocessor">#include &lt;iostream&gt;</span>
00002 
00003 <span class="preprocessor">#include "ys_debug.h"</span>
00004 <span class="preprocessor">#include "ys_log.h"</span>
00005 
00006 <span class="preprocessor">#include "wx/log.h"</span>
00007 <span class="preprocessor">#include "wx/image.h"</span>
00008 <span class="preprocessor">#include "wx/imaglist.h"</span>
00009 <span class="preprocessor">#include "wx/listctrl.h"</span>
00010 <span class="preprocessor">#include "wx/textctrl.h"</span>
00011 <span class="preprocessor">#include "wx/bitmap.h"</span>
00012 
00013 <span class="preprocessor">#include "images/stormtroop.xpm"</span>
00014 <span class="preprocessor">#include "images/yoda.xpm"</span>
00015 <span class="preprocessor">#include "images/boba_ship.xpm"</span>
00016 <span class="preprocessor">#include "images/dstar.xpm"</span>
00017 
00018 <span class="keyword">using</span> <span class="keyword">namespace </span>std;
00019 IMPLEMENT_DYNAMIC_CLASS(<a class="code" href="class_yard_log.html">YardLog</a>, wxListCtrl)
00020 
00021 YardLog::YardLog(wxWindow* parent, wxWindowID id, <span class="keyword">const</span> wxPoint&amp; pos, 
00022     <span class="keyword">const</span> wxSize&amp; size, <span class="keywordtype">long</span> style, 
00023     <span class="keyword">const</span> wxValidator&amp; validator, 
00024     <span class="keyword">const</span> wxString&amp; name)
00025 : wxListCtrl(parent, id, pos, size, style, validator, name)
00026 {
00027  
00028     InsertColumn(0, wxT(<span class="stringliteral">"Type"</span>));
00029     InsertColumn(1, wxT(<span class="stringliteral">"Message"</span>));
00030     
00031 
00032     <span class="comment">// prepare the imagelist</span>
00033     <span class="keyword">enum</span> { ICON_SIZE = 16 };
00034     
00035     wxImageList *imageList = <span class="keyword">new</span> wxImageList(ICON_SIZE, ICON_SIZE, <span class="keyword">true</span>);
00036 
00037     <span class="comment">// order should be the same as in the switch below!</span>
00038 
00039     imageList-&gt;Add( wxBitmap( stormtroop_xpm ).ConvertToImage().Rescale(ICON_SIZE, ICON_SIZE) );
00040     imageList-&gt;Add( wxBitmap( boba_ship_xpm ).ConvertToImage().Rescale(ICON_SIZE, ICON_SIZE) );
00041     imageList-&gt;Add( wxBitmap( yoda_xpm ).ConvertToImage().Rescale(ICON_SIZE, ICON_SIZE) );
00042     imageList-&gt;Add( wxBitmap( dstar_xpm ).ConvertToImage().Rescale(ICON_SIZE, ICON_SIZE) );
00043     
00044 
00045     SetImageList(imageList, wxIMAGE_LIST_SMALL);
00046 
00047     Show(<span class="keyword">true</span>);
00048     
00049     <span class="keyword">delete</span> wxLog::SetActiveTarget(<span class="keyword">this</span>);
00050     
00051 }
00052 
00053 <span class="keywordtype">bool</span> YardLog::Create(wxWindow* parent, wxWindowID id, <span class="keyword">const</span> wxPoint&amp; pos, 
00054     <span class="keyword">const</span> wxSize&amp; size, <span class="keywordtype">long</span> style, 
00055     <span class="keyword">const</span> wxValidator&amp; validator, 
00056     <span class="keyword">const</span> wxString&amp; name)
00057 {
00058     <span class="keywordflow">if</span> ( !wxListCtrl::Create(parent, id, pos, size, style, validator, name) )
00059         <span class="keywordflow">return</span> <span class="keyword">false</span>;
00060 
00061     InsertColumn(0, wxT(<span class="stringliteral">"Type"</span>));
00062     InsertColumn(1, wxT(<span class="stringliteral">"Message"</span>));
00063     
00064 
00065     <span class="comment">// prepare the imagelist</span>
00066     <span class="keyword">enum</span> { ICON_SIZE = 16 };
00067     
00068     wxImageList *imageList = <span class="keyword">new</span> wxImageList(ICON_SIZE, ICON_SIZE, <span class="keyword">true</span>);
00069 
00070     <span class="comment">// order should be the same as in the switch below!</span>
00071 
00072     imageList-&gt;Add( wxBitmap( stormtroop_xpm ).ConvertToImage().Rescale(ICON_SIZE, ICON_SIZE) );
00073     imageList-&gt;Add( wxBitmap( boba_ship_xpm ).ConvertToImage().Rescale(ICON_SIZE, ICON_SIZE) );
00074     imageList-&gt;Add( wxBitmap( yoda_xpm ).ConvertToImage().Rescale(ICON_SIZE, ICON_SIZE) );
00075     imageList-&gt;Add( wxBitmap( dstar_xpm ).ConvertToImage().Rescale(ICON_SIZE, ICON_SIZE) );
00076     
00077 
00078     SetImageList(imageList, wxIMAGE_LIST_SMALL);
00079 
00080     Show(<span class="keyword">true</span>);
00081     
00082     <span class="keyword">delete</span> wxLog::SetActiveTarget(<span class="keyword">this</span>);
00083     
00084 }
00085 
00086 
00087 YardLog::~YardLog()
00088 {
00089     wxLog::SetActiveTarget(NULL);
00090     <span class="keyword">delete</span> GetImageList(wxIMAGE_LIST_SMALL);
00091 }
00092 
00093 <span class="keywordtype">void</span> YardLog::DoLog(wxLogLevel level, <span class="keyword">const</span> wxChar *szString, time_t t)
00094 {
00095   <span class="keywordtype">int</span> image;
00096 
00097   wxString string_type;
00098   cout &lt;&lt; <span class="stringliteral">"LOG: "</span> &lt;&lt; szString &lt;&lt; endl;
00099 
00100   <span class="keywordflow">switch</span> ( level )
00101   {
00102   <span class="keywordflow">case</span> wxLOG_Error:
00103     image = 0;
00104     string_type = wxT(<span class="stringliteral">"Error"</span>);
00105     <span class="keywordflow">break</span>;
00106   <span class="keywordflow">case</span> wxLOG_Warning:
00107     image = 1;
00108     string_type = wxT(<span class="stringliteral">"Warning"</span>);
00109     <span class="keywordflow">break</span>;
00110   <span class="keywordflow">case</span> wxLOG_FatalError:
00111     image = 0;
00112     string_type = wxT(<span class="stringliteral">"Fatal error"</span>);
00113     <span class="keywordflow">break</span>;
00114   <span class="keywordflow">case</span> wxLOG_Message:
00115     image = 2;
00116     string_type = wxT(<span class="stringliteral">"Message"</span>);
00117     <span class="keywordflow">break</span>;
00118   <span class="keywordflow">case</span> wxLOG_Info:
00119     image = 2;
00120     string_type = wxT(<span class="stringliteral">"Info"</span>);
00121     <span class="keywordflow">break</span>;
00122   <span class="keywordflow">case</span> wxLOG_Status:
00123     image = 2;
00124     string_type = wxT(<span class="stringliteral">"Status"</span>);
00125     <span class="keywordflow">break</span>;
00126   <span class="keywordflow">case</span> wxLOG_Debug:
00127     image = 1;
00128     string_type = wxT(<span class="stringliteral">"Debug"</span>);
00129     <span class="keywordflow">break</span>;
00130   <span class="keywordflow">case</span> wxLOG_Trace:
00131     image = 2;
00132     string_type = wxT(<span class="stringliteral">"Trace"</span>);
00133     <span class="keywordflow">break</span>;
00134   <span class="keywordflow">case</span> wxLOG_Progress:
00135     image = 2;
00136     string_type = wxT(<span class="stringliteral">"Progress"</span>);
00137     <span class="keywordflow">break</span>;
00138   <span class="keywordflow">case</span> wxLOG_CONSOLE:
00139     image = 2;
00140     string_type = wxT(<span class="stringliteral">"Console"</span>);
00141     <span class="keywordflow">break</span>;
00142   <span class="keywordflow">case</span> wxLOG_DB:
00143     image = 3;
00144     string_type = wxT(<span class="stringliteral">"Database"</span>);
00145     <span class="keywordflow">break</span>;
00146   <span class="keywordflow">case</span> wxLOG_SQL: 
00147     { 
00148         image = 2;
00149         wxTextCtrl * sql = static_cast&lt;wxTextCtrl *&gt;(FindWindow(YardDebugScreen::ID_DEBUG_SQL));
00150         <span class="keywordflow">if</span> (sql)
00151             sql-&gt;SetValue(szString);
00152         string_type = wxT(<span class="stringliteral">"SQL"</span>); 
00153     }
00154     <span class="keywordflow">break</span>;
00155   <span class="keywordflow">default</span>:
00156     string_type = wxT(<span class="stringliteral">"Unknown"</span>);
00157     image = 2;
00158     <span class="keywordflow">break</span>;
00159   }
00160 
00161   InsertItem(0, string_type, image);
00162   SetItem(0,1,szString);
00163 
00164   SetColumnWidth(0, wxLIST_AUTOSIZE);
00165   SetColumnWidth(1, wxLIST_AUTOSIZE);
00166 
00167 }
00168 
00169 
00170 <span class="keywordtype">void</span> wxLogCon(<span class="keyword">const</span> wxChar* sxFormat,  ...)
00171 {
00172     va_list argptr;
00173     va_start(argptr, sxFormat);
00174     wxVLogGeneric(wxLOG_CONSOLE, sxFormat, argptr);
00175    <span class="comment">// cout &lt;&lt; sxFormat &lt;&lt; endl;</span>
00176     va_end(argptr);
00177     
00178 }
00179 
00180 <span class="keywordtype">void</span> wxLogDB(<span class="keyword">const</span> wxChar* sxFormat,  ...)
00181 {
00182     va_list argptr;
00183     va_start(argptr, sxFormat);
00184     wxVLogGeneric(wxLOG_DB, sxFormat, argptr);
00185    <span class="comment">// cout &lt;&lt; sxFormat &lt;&lt; endl;</span>
00186     va_end(argptr);
00187     
00188 }
00189 
00190 <span class="keywordtype">void</span> wxLogSQL(<span class="keyword">const</span> wxChar* sxFormat, ...)
00191 {
00192     va_list argptr;
00193     va_start(argptr, sxFormat);
00194     wxVLogGeneric(wxLOG_SQL, sxFormat, argptr);
00195    <span class="comment">// cout &lt;&lt; sxFormat &lt;&lt; endl;</span>
00196     va_end(argptr);
00197     
00198 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Sun May 9 23:07:59 2004 for YardSale by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.5 </small></address>
</body>
</html>
